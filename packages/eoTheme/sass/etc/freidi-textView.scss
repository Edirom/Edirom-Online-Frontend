/*Variables*/
$pageWidth: 24em;
$lineHeight: 1.5em;
$underlineColor: #333333;

/*Mixin to format a bracket before "jägerpursch" in castlists*/
@mixin jaegerpursch {
	position: relative;
	margin-left: -2.5em;
	
	//bracket before "Jägerpursch"
	&:after {
		position: absolute;
		content: '}';
		font-size: 2em;
		top: 0.5em;
		left: 8.3em;
	}
	
	//placement of "Jägerpursch"
	span.role + span.role span {
		position: absolute;
		left: 15em;
		top: 0.9em;
	}
	
	//hide second "Jägerpursch" element (which is empty, but still confuses the layout otherwise
	li + li span.role + span.role span {
		display: none;
	}
}

/*Mixin to provide a bracket after simultaneous speakers */
@mixin zugleich($right) {
	position: relative;
    right: $right;
    top: -45px;
    
    &:before {
    	background-color: #ffffff;
		border: 1px solid #000000;
		border-radius: 0 5px 5px 0;
		border-left: none;
		content: " ";
		display: block;
		height: 80px;
		left: -8px;
		position: absolute;
		top: -30px;
		width: 10px;
    }
}


.textViewContent {
	
	font-size: 16px;
	display: block;
	line-height: 2em;
	
	h1 {
		font-size: 2em;
		margin-top: 0;
		margin-bottom: 1em;
	}
	
	h2 {
		text-align: center;
		width: $pageWidth / 1.4;
		
		font-weight: normal;
		font-style: normal;
		font-size: 1.4em;
		
		margin-bottom: 1.2em;
	}
	
	h3 {
		text-align: center;
		width: $pageWidth / 1.2;
		
		font-weight: normal;
		font-style: normal;
		font-size: 1.2em;
		
		margin-top: 3em;
		margin-bottom: 1em;	
	}
	
	div.act {
		margin-left: 2em;
	}
	
	.stage {
		font-style: normal;
		font-size: 0.9em;
		line-height: 1.4em;
		
		color: #555555;
		
		margin-left: 4em;
		margin-bottom: 0.5em;
		//todo: vorher als inline-block
		display: block;
		
		&.right {
			margin-left: 17em;
			text-align: left;
		}
		
		&.center {
			width: $pageWidth;
			margin-left: 0;
		}
		
		&.inline {
			display: inline;
			margin-left: 0;
			margin-bottom: 0;
		}
	}
	
	span.caption {
		font-size: 1em;
		text-align: center;
		width: $pageWidth;
		display: block;
		margin-top: 1em;
		margin-bottom: 1em;
	}
	
	div.speaker {
		font-size: 1em;
		font-weight: normal;
		text-align: center;
		width: $pageWidth;
		margin-top: 1.3em;
		margin-bottom: -0.3em;
		
		.underline + .underline {margin-left: 0.2em;}
		
		& + br + .stage {
			margin-top: -1.5em;
		}
	}
	
	span.name {
		letter-spacing: 0.2em;
	}
	
	div.p-in-sp, div.l {
		margin-left: 2em;
		line-height: 1.4em;	
	}
	
	.sp {
		margin-top: 1em;
		margin-bottom: 1em;
		line-height: 1.4em;
	}
	
	span.role {
		font-size: 1.2em;
		font-style: normal;
		text-align: left;
		margin-left: 4em;
		margin-bottom: 0.3em;
	}
	
	span.setting {
		margin-top: 1em;
		margin-bottom: 1em;
	}
	
	span.place {
		font-size: 0.7em;
		position: relative;
		top: -0.3em;
	}
	
	div.lg {
		margin-top: 0;
	}
	
	span.right { margin-left: 13em; }
	div.right { width: $pageWidth; }
	
	p.center { width: $pageWidth; }
	span.center {
		margin-left: 0;
		display: block;
		width: $pageWidth;
		text-align: center;
	}
	
	div.inline {
		display: inline;
		margin-left: 0;
		font-size: 1em;
	}	
		
	div.note {display: none;}
	
	span.hi {
		letter-spacing: 0.1em;
	}
	span.latintype { font-style: italic; }
	span.strikethrough {
		@include background-image(linear-gradient(top, transparent, transparent 50%, $underlineColor 51%, transparent 52%));
	}

	span.hyphen {margin-left: -0.3em;}
	
	.pagebreak {
		font-size: 12px;
		background-color: transparent;
		color: #585858;
		font-style: normal;
		font-weight: normal;
		border: none;
		display: block;
		margin-bottom: -1.3em;
		//margin-left: 1em;
		position: absolute;
		left: 0.8em;
		
		/*& + .pagebreak {
			margin-top: 2em;
			
			& + .pagebreak {
				margin-top: 4em;
				
				& + .pagebreak {
					margin-top: 6em;
				}
			}
		}*/
				
		/*&.inner {
			display: block;
			position: absolute;
			left: 0;
			margin-left: 2em;
		}*/
	}
	
	br + .pagebreak.inner + br.pb, div + .pagebreak.inner + br.pb {
		display: none;
	}
	
	.teidiv0 > p {
		margin-left: 4em;
	}
	
	.teidiv0 > h2 {
		margin-bottom: 1em !important;
	}
	
	/*Vorlage für Libretti*/
	.freidi_libretto {
		
		line-height: 1.8em;
		
		div.teidiv0 > p:first-child {
			//margin-left: 15em;
			margin-bottom: 1.5em;
		}
		
		div.titlePage {
			width: $pageWidth;
			border-bottom: none;
			border-top: none;
		}
		
		div.titlePart {
			line-height: 2em;
			margin-bottom: 0.6em;
			
			&.main {font-size: 1.8em;}
		}
		
		
		
		.underline {
			text-decoration: none;
			
			@include background-image(linear-gradient(bottom, transparent 4px, $underlineColor 4px, transparent 5px));
			
			&.n2 {
				@include background-image(linear-gradient(bottom, transparent 2px, $underlineColor 2px, transparent 3px, transparent 4px, $underlineColor 4px, transparent 5px));
			}
			
			.pagebreak {
				background: none;
			}
		}
		
		/*.p-in-sp .pagebreak {
			margin-left: -2em;
			
			&.inner {
				margin-left: 2em;
			}
		}*/
		
		h2 {
			margin-top: 5em;
			margin-bottom: -2em;
		}
		
		span.role {
			margin-left: 0.2em;
			
			&:first-child {
				margin-left: 4em;
			}
		}
		
		span.act {font-size: 1.8em;}
		span.scene {font-size: 1.5em;}
		
		div[id$="front.1_div.1"] em {
			font-size: 1.4em;
			position: relative;
			left: 5em;
		}
		
		/*individuelle Styles für Handexemplar*/
		&.KAtx4 {
			//.titlePart.main span.underline {border-bottom: 1px solid #000000;}
			
			//div.l {margin-left: 7em;}
			div.lg.indent {margin-left: 2.5em}
			
			.act + .caption {
				padding-top: 2em;
				margin-bottom: -2em;
			}
			
			//cast list styling
			div.teidiv0 ul {
				list-style-type: none;
				
				ul {
					@include jaegerpursch;
				}
			}
			
			//"zugleich"
			.stage.it.inline[id$="d1e4378"] {
				@include zugleich(-50px);
			}
		
			.stage.it.inline[id$="d1e4488"] {
				@include zugleich(-50px);
			}
		
			.stage.it.inline[id$="d1e6302"] {
				@include zugleich(-210px);
			}
			
			//hyphens corrected
			.stage[id$='d1e1963'] .hyphen {
				//fol 6r: Jä-
				margin-left: 0;
			}
			
			.p-in-sp[id$='d1e3275'] .hyphen {
				//fol 10r: Klaus-
				margin-left: 0;
			}
			
			.stage[id$='d1e6763'] .hyphen {
				//fol 20r: Sam-
				margin-left: 0;
			}
			
			
			
		}
		
		/*individuelle Styles für Druck */
		&.D-tx2 {
		
			h2,h3 {
				//width: $pageWidth - 1.5em;
				margin-left: 2.5em;
			}
		
			div.titlePage {
				width: $pageWidth - 1.5em;
				letter-spacing: 0.2em;
				
				div.titlePart {
					position: relative;
					left: 2em;
					
					&.main {
						margin-left: -2em;
					}
				}
				
			}
			//für die CastList-Zeitangabe
			ul p {margin-left: 9.5em;}
			
			//für die CastList-Rollennamen
			li span.role:first-child {letter-spacing: 0.2em;}
			
			.stage { 
				font-size: 0.8em; 
				
				//&.left {margin-left: 6em;}
				&.center {width: $pageWidth - 1.5em;}
				
				name {font-size: 0.85em;}
			}
			
			//div.l { margin-left: 7em; }
			
			div.lg {
				margin-left: 0;
				
				&.indent {
					padding-left: 3em;
					
					//span.pagebreak {margin-left: -3em;}
				}
			}
			
			p.center { width: $pageWidth - 1.5em; }
			span.center {width: $pageWidth - 1.5em;}
			span.caption { width: $pageWidth - 1.5em; }
			div.speaker {
				width: $pageWidth - 1.5em;
				letter-spacing: 0.15em;
				
				* {
					letter-spacing: 0;
				}
			}
			div.right {width: $pageWidth - 1.5em;}
			
			.expanded {letter-spacing: 0.2em;}
			
			.lb_indent {padding-left: 12em;}
			
			div.teidiv0 ul {
				list-style-type: none;
				
				ul {
					@include jaegerpursch;
				}
			}
			
			//"zugleich"
			.stage.it.inline[id$="d1e4405"] {
				@include zugleich(-50px);
			}
		
			.stage.it.inline[id$="d1e6080"] {
				@include zugleich(-180px);
			}
			
			div.pagebreak[id$='file-pb-d208634e900'] + br.pb + .titlePage {
				//erstes Titelblatt
				.titlePart:first-child span.expanded {
					font-size: 1.8em;
					margin-bottom: 2em;
				}
			} 
			
		}
		
	}
	
	/*Vorlage für Referenztexte*/
	.freidi_reference {
		
		margin-left: 4em;
		margin-bottom: 6em;
		
		h2 {
			margin: 5em 0 1em -2em;
		}
		
		span.head {
			font-size: 1.3em;
			letter-spacing: 0.1em;
		}
		
		.stage {
			font-size: 0.9em;
			margin: 0.4em 0 0.4em 0;

			//wofür das?
			//&:first-letter {margin-left: -1em;}
			
			&.right {
				margin: 0.4em 0 0.4em $pageWidth;
			}
		}
		
		.indent_1 {margin-left: 4.5em;}
		.indent_2 {margin-left: 6.5em;}
		.indent_3 {margin-left: 9em;}
		.indent_4 {margin-left: 11em;}
		
		.speaker {
			letter-spacing: 0.1em;
			margin-bottom: 0.4em;
			margin-left: -2em;
			
			& > * {
				letter-spacing: 0em;
				
				&[class='term'] {letter-spacing: 0.1em;}
			}
		}
		
		.center {
			text-align: center;
			width: $pageWidth;
			display: block;
			margin-left: -2em;
		}
		
		.byline {
			margin-bottom: 3em;
			letter-spacing: 0.1em;
		}
		
		span.right {
			margin-left: 20em;
		}
		
		div.lg {
			margin-bottom: 1.5em;
			
			//&.indent_2 .pagebreak { margin-left: -9.7em;}
		}
		
		div.teidiv0 > p:first-child {
			//margin-left: 15em;
			margin-bottom: 1.5em;
		}
		
	}
	
	
}



/*todo: resolve*/
/*

.textViewContent .freidi_reference .margin_top {
    margin-top: 1em;
}

//problem: static ID reference – impossible to find that one again…
.textViewContent .freidi_libretto.KAtx4 p#ext-gen1303 {
    margin-left: 15em;
    margin-bottom: 1.5em;
}

//Sachen, die sonst zu weit rechts und in der falschen Zeile sitzen
.textViewContent .freidi_libretto.KAtx4 #d1e4395 {
    display: block;
}

.textViewContent .freidi_libretto.KAtx4 #d1e5120 {
    display: block;
}

.textViewContent .freidi_libretto.KAtx4 #d1e5171 {
    display: block;
}

//das arbeitet auf XML, nicht auf HTML (Attribut @rend!)
.lg[rend~="indent"] {
   display: block;    
   margin-left: 8em;
   margin-top: 0.5em;
   margin-bottom: 0.5em;
}


*/